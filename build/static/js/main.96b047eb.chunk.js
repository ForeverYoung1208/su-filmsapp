(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{48:function(e,a,t){e.exports=t(94)},57:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){},69:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(14),i=t.n(o),l=t(11),c=t(19),s=t(12),m=t(44),u=t(5),v=t(15),f=t(16),d=t(18),p=t(17),h=t(4),_=(t(57),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__wrapper"},r.a.createElement("strong",{className:"footer__copyright"},"All Rights Reserved, ",(new Date).getFullYear())))}),b=(t(58),function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={error:null},e}return Object(f.a)(t,[{key:"render",value:function(){var e=this.state.error,a=this.props.children;if(!e)return a;var t=e.name,n=e.message;return r.a.createElement("div",{className:"error-boundary"},r.a.createElement("div",{className:"error-boundary__content"},r.a.createElement("div",{className:"error-boundary__body"},r.a.createElement("div",{className:"error-boundary__top"},r.a.createElement("h1",{className:"error-boundary__title"},t),r.a.createElement("i",{className:"fas fa-bug error-boundary__icon"})),r.a.createElement("p",{className:"error-boundary__text"},n),r.a.createElement("a",{href:"/",className:"error-boundary__link"},"Return to previous page"))),r.a.createElement(_,null))}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),t}(n.Component)),g=t(13),E=t.n(g),N=t(95),y=(t(59),function(e){var a=e.type,t=void 0===a?"text":a,n=e.name,o=e.label,i=e.wrapperClassName,l=e.className,c=e.value,s=e.onChange,m=e.onBlur,v=e.onKeyDown,f=Object(N.a)();return r.a.createElement("div",{className:E()("input-wrapper",Object(u.a)({},i,i))},r.a.createElement("label",{htmlFor:f,className:E()("input-wrapper__label",{"input-wrapper__label--top":c})},o),r.a.createElement("input",{id:f,type:t,name:n,className:E()("input-wrapper__input",Object(u.a)({},l,l)),autoComplete:"off",value:c,onChange:s,onBlur:m,onKeyDown:v}))}),O=(t(60),Object(n.memo)((function(e){var a=e.type,t=void 0===a?"button":a,n=e.className,o=e.isDisabled,i=void 0!==o&&o,l=e.onClick,c=e.children;return console.log("RENDER..."),r.a.createElement("button",{type:t,className:E()("button",Object(u.a)({},n,n)),disabled:i,onClick:l},c)}))),j=(t(61),[{id:1,url:"/",title:"Home",exact:!0},{id:2,url:"/favorite-movies",title:"Favorite Movies"},{id:3,url:"/profile",title:"Profile"},{id:4,title:"Logout"}]),I=function(e){var a=e.logoutUser;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"navbar__list"},j.map((function(e){var t=e.id,n=e.url,o=e.title,i=e.exact;return n?r.a.createElement("li",{key:t,className:"navbar__list-item"},r.a.createElement(l.c,{to:n,exact:i,className:"navbar__link",activeClassName:"navbar__link--active"},o)):r.a.createElement("li",{key:t,className:"navbar__list-item"},r.a.createElement("span",{className:"navbar__link",onClick:a},o))}))))},k=function(e,a,t){return localStorage.setItem("idToken",e),localStorage.setItem("localId",a),localStorage.setItem("databaseKey",t),{type:"[auth] AUTHENTICATE_USER",idToken:e,localId:a,databaseKey:t}},w=(t(63),Object(s.b)((function(e){return{isAuthenticated:!!e.auth.idToken}}),{logoutUser:function(){return localStorage.removeItem("idToken"),localStorage.removeItem("localId"),localStorage.removeItem("databaseKey"),{type:"[auth] LOGOUT_USER"}}})((function(e){var a=e.isAuthenticated,t=e.search,n=e.isFetching,o=e.className,i=e.onChangeInput,l=e.searchMovies,c=e.logoutUser,s=["toolbar"];return a&&o&&s.push(o),r.a.createElement("div",{className:s.join(" ")},r.a.createElement("div",{className:"toolbar__wrapper"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"toolbar__tools"},r.a.createElement(y,{label:"I am searching...",name:"search",className:"toolbar__input",value:t,onChange:i,onKeyDown:function(e){"Enter"===e.key&&t&&l()}}),r.a.createElement(O,{className:"button--orange",isDisabled:n||!t,onClick:l},n?"Searching...":"Search")),r.a.createElement(I,{logoutUser:c})):r.a.createElement("h1",{className:"toolbar__title"},"Welcome to our Application!")))}))),M=(t(64),function(e){var a=e.type,t=e.toPortal,n=void 0===t||t,i=["fas","fa-spinner","loader","loader--".concat(a)];return n?Object(o.createPortal)(r.a.createElement("i",{className:i.join(" ")}),document.getElementById("modal-root")):r.a.createElement("i",{className:i.join(" ")})}),S=(t(65),function(){return Object(o.createPortal)(r.a.createElement("div",{className:"backdrop"}),document.getElementById("modal-root"))}),C=(t(66),function(e){var a=e.search,t=e.isFetching,n=e.onChangeInput,o=e.searchMovies,i=e.children;return r.a.createElement("div",{className:"layout"},r.a.createElement(w,{search:a,isFetching:t,className:"toolbar--sticky",onChangeInput:n,searchMovies:o}),r.a.createElement("div",{className:"layout__content"},i,t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(M,{type:"orange"}))),r.a.createElement(_,null))}),F=(t(67),function(e){var a=e.movies,t=r.a.createElement("div",{className:"home__container"},r.a.createElement("p",{className:"home__text"},"There are no movies yet. Please, search them first!"));return a.length&&(t=r.a.createElement("div",{className:"home__movies"},a.map((function(e){var a=e.id,t=e.original_title,n=e.poster_path;return r.a.createElement("div",{key:a,className:"home__movie",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w500".concat(n,")")}},r.a.createElement("h1",{className:"home__title"},t),r.a.createElement(l.b,{to:"/movies/".concat(a),className:"button button--blue home__link"},"Read More"))})))),r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home__wrapper"},t))}),T=t(47),A=(t(68),function(e){var a=e.content,t=e.effect,n=void 0===t?"solid":t,o=e.place,i=void 0===o?"top":o,l=e.tooltipClass,c=e.children,s=Object(N.a)(),m=["tooltip"];return l&&m.push(l),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-tip":a,"data-for":s,"data-effect":n,"data-place":i,"data-class":m.join(" "),"data-delay-hide":300},c),r.a.createElement(T.a,{id:s}))}),R=(t(69),function(e){var a=e.movies;return r.a.createElement("div",{className:"similar-movies"},r.a.createElement("ul",{className:"similar-movies__list"},a.map((function(e){var a=e.id,t=e.poster_path,n=e.original_title;return r.a.createElement("li",{key:a,className:"similar-movies__list-item"},r.a.createElement(A,{content:n,place:"left",tooltipClass:"similar-movies__tooltip"},r.a.createElement(l.b,{to:"/movies/".concat(a),className:"similar-movies__link"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(t),alt:n,className:"similar-movies__img"}))))}))))}),U=t(27),D=Object(U.create)({baseURL:"https://identitytoolkit.googleapis.com"}),K=Object(U.create)({baseURL:"https://movies-app-58adf.firebaseio.com"}),V=Object(U.create)({baseURL:"https://api.themoviedb.org/3"}),P=(t(87),"1a67fd8fb5bbd9369d8ed3886f1ac2e2"),H=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={fullMovie:null,similarMovies:[]},e.addMovieToFavorite=function(e){console.log("[movieId]",e)},e.manageFavoriteMovie=function(){var a=e.state.fullMovie,t=e.props,n=t.addMovieToFavorite,r=t.removeMovieFromFavorite,o=t.favoriteMovies.find((function(e){return e.id===a.id}));if(o)return r(o.databaseId);n(a)},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.match,n=a.movies,r=t.params.movieId,o=n.find((function(e){return e.id===+r}));if(o)return this.fetchSimilarMovies(r).then((function(){e.setState({fullMovie:o})})).catch((function(e){console.log("[error]",e)}));V.get("/movie/".concat(r,"?api_key=").concat(P,"&language=en-US")).then((function(a){var t=a.data;t&&e.fetchSimilarMovies(r).then((function(){e.setState({fullMovie:t})})).catch((function(e){console.log("[error]",e)}))})).catch((function(e){console.log("[error]",e)}))}},{key:"componentDidUpdate",value:function(e){var a=this,t=this.props.match.params.movieId,n=e.match.params.movieId;t!==n&&V.get("/movie/".concat(t,"?api_key=").concat(P,"&language=en-US")).then((function(e){var n=e.data;n&&a.fetchSimilarMovies(t).then((function(){a.setState({fullMovie:n})})).catch((function(e){console.log("[error]",e)}))})).catch((function(e){console.log("[error]",e)}))}},{key:"fetchSimilarMovies",value:function(e){var a=this;return V.get("/movie/".concat(e,"/similar?api_key=").concat(P,"&language=en-US&page=1")).then((function(e){var t=e.data.results.slice(0,3);return a.setState({similarMovies:t})})).catch((function(e){console.log("[error]",e)}))}},{key:"render",value:function(){var e=this.state,a=e.fullMovie,t=e.similarMovies;if(!a)return null;var n=this.props.favoriteMovies,o=a.id,i=a.poster_path,l=a.backdrop_path,c=a.original_title,s=a.release_date,m=a.overview,u=n.some((function(e){return e.id===o})),v=["full-movie__btn"];return u?v.push("button--red"):v.push("button--blue"),r.a.createElement("div",{className:"full-movie"},r.a.createElement("div",{key:o,className:"full-movie__content",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p","/original").concat(l,")")}},r.a.createElement("div",{className:"full-movie__body"},r.a.createElement("div",{className:"full-movie__img-wrapper"},r.a.createElement("img",{src:"".concat("https://image.tmdb.org/t/p","/w500").concat(i),alt:c,className:"full-movie__img"})),r.a.createElement("div",{className:"full-movie__info-wrapper"},r.a.createElement("div",{className:"full-movie__info"},r.a.createElement("h1",{className:"full-movie__title"},c),r.a.createElement("strong",{className:"full-movie__date"},s),r.a.createElement("p",{className:"full-movie__text"},m)),r.a.createElement(O,{className:v.join(" "),onClick:this.manageFavoriteMovie},u?"Remove from Favorite":"Add to Favorite"))),r.a.createElement(R,{movies:t})))}}]),t}(n.Component),x=t(20),L=(t(88),Object(s.b)((function(e){return{databaseKey:e.auth.databaseKey}}))((function(e){var a=e.databaseKey,t=Object(n.useState)(""),o=Object(x.a)(t,2),i=o[0],l=o[1],c=Object(n.useState)(""),s=Object(x.a)(c,2),m=s[0],u=s[1],v=Object(n.useState)(""),f=Object(x.a)(v,2),d=f[0],p=f[1];Object(n.useEffect)((function(){a&&K.get("users/".concat(a,".json")).then((function(e){if(e.data){var a=e.data,t=a.firstName,n=a.lastName,r=a.age;l(t),u(n),p(r)}})).catch((function(e){console.log("[error]",e)}))}),[a]);var h=function(e){var a=e.target,t=a.name,n=a.value;return"firstName"===t?l(n):"lastName"===t?u(n):void("age"===t&&p(n))},_=Object(n.useCallback)((function(e){e.preventDefault(),console.log("SUBMITTED!")}),[]);return r.a.createElement("div",{className:"profile"},r.a.createElement("form",{className:"profile__form"},r.a.createElement("h1",{className:"profile__title"},"Profile"),r.a.createElement("div",{className:"profile__fields"},r.a.createElement(y,{wrapperClassName:"profile__input-wrapper",className:"profile__input",label:"First name",name:"firstName",value:i,onChange:h}),r.a.createElement(y,{wrapperClassName:"profile__input-wrapper",className:"profile__input",label:"Last name",name:"lastName",value:m,onChange:h}),r.a.createElement(y,{wrapperClassName:"profile__input-wrapper",className:"profile__input",label:"Age",name:"age",value:d,onChange:h})),r.a.createElement(O,{className:"button--orange profile__btn",onClick:_},"Submit")))}))),B=t(45),z=t(3),G={isAlphabetic:function(e,a){return a.test(e)?null:"Provided value should have alphabetic characters only."},isNumeric:function(e,a){return a.test(e)?null:"Provided value should have numeric characters only."},isEmail:function(e,a){return a.test(e)?null:"Provided value should be an email address."},minLength:function(e,a){return e.length>=a?null:"Provided value should have minimum length of ".concat(a,".")}},$=(t(89),"AIzaSyC3vTcNvrRtCGQAQwVF8fDuMCcwypi2feI"),W="Sign In",J="Sign Up",Q=["email","password"],X=["firstName","lastName","age","email","password","confirmPassword"],Z={mode:W,firstName:{type:"text",name:"firstName",label:"First name",value:"",errors:[],validationRules:{isAlphabetic:/^[a-zA-Z]+$/}},lastName:{type:"text",name:"lastName",label:"Last name",value:"",errors:[],validationRules:{isAlphabetic:/^[a-zA-Z]+$/}},age:{type:"number",name:"age",label:"Age",value:"",errors:[],validationRules:{isNumeric:/^[0-9]+$/}},email:{type:"email",name:"email",label:"E-mail",value:"",errors:[],validationRules:{isEmail:/^[a-z._\-0-9]+@[a-z]+\.[a-z]{2,3}$/}},password:{type:"password",name:"password",label:"Password",value:"",errors:[],validationRules:{minLength:6}},confirmPassword:{type:"password",name:"confirmPassword",label:"Confirm password",value:"",errors:[],validationRules:{minLength:6}}},q=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state=Z,e.onChangeHandler=function(a){var t=a.target,n=t.name,r=t.value;e.setState(Object(u.a)({},n,Object(z.a)(Object(z.a)({},e.state[n]),{},{value:r})))},e.onBlurHandler=function(a){var t=a.target.name,n=e.validate(e.state[t]);e.setState(Object(u.a)({},t,Object(z.a)(Object(z.a)({},e.state[t]),{},{errors:n})))},e.onSubmitHandler=function(a){a.preventDefault();var t=e.state,n=t.mode,r=t.email,o=t.password,i=t.firstName,l=t.lastName,c=t.age,s={email:r.value,password:o.value,returnSecureToken:!0},m=n===W?"signInWithPassword":"signUp";D.post("v1/accounts:".concat(m,"?key=").concat($),s).then((function(a){var t=e.props.authenticateUser,r=a.data,o=r.idToken,s=r.localId,m=r.displayName;if(n===W)return t(o,s,m);var u={firstName:i.value,lastName:l.value,age:+c.value};K.post("users.json",u).then((function(e){var a=e.data.name,n={idToken:o,displayName:a};D.post("v1/accounts:update?key=".concat($),n).then((function(){t(o,s,a)}))}))})).catch((function(e){console.log("[error]",e)}))},e.switchModeHandler=function(a){e.state.mode!==a&&e.setState(Object(z.a)(Object(z.a)({},Z),{},{mode:a}))},e}return Object(f.a)(t,[{key:"validate",value:function(e){var a=e.validationRules,t=e.value,n=[];for(var r in a){var o=a[r],i=(0,G[r])(t.trim(),o);i&&n.push(i)}return n}},{key:"formIsInvalid",value:function(e){var a,t=e===W?Q:X,n=!0,r=Object(B.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,i=this.state[o],l=i.errors,c=i.value;n=!l.length&&!!c&&n}}catch(s){r.e(s)}finally{r.f()}return!n}},{key:"render",value:function(){var e=this,a=this.state.mode,t=a===W?Q:X;return r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"auth__form-wrapper"},r.a.createElement("div",{className:"auth__tabs"},[W,J].map((function(t){var n=["auth__tab"];return t===a&&n.push("auth__tab--active"),r.a.createElement("button",{key:t,type:"button",className:n.join(" "),onClick:function(){return e.switchModeHandler(t)}},t)}))),r.a.createElement("form",{className:"auth__form",autoComplete:"off",noValidate:!0,onSubmit:this.onSubmitHandler},t.map((function(a){var t=e.state[a],n=t.type,o=t.name,i=t.label,l=t.value,c=t.errors;return r.a.createElement("div",{key:a,className:"auth__field-wrapper"},r.a.createElement(y,{type:n,name:o,label:i,wrapperClassName:"auth__input-wrapper",className:"auth__input",value:l,onChange:e.onChangeHandler,onBlur:e.onBlurHandler}),c.map((function(e,a){return r.a.createElement("p",{key:a,className:"auth__error"},e)})))})),r.a.createElement(O,{type:"submit",className:"button--orange auth__btn",isDisabled:this.formIsInvalid(a)},"Submit"))))}}]),t}(n.Component),Y=Object(s.b)(null,{authenticateUser:k})(q),ee=(t(90),function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("h1",{className:"page-not-found__title"},"404"),r.a.createElement("p",{className:"page-not-found__description"},"PAGE NOT FOUND"))}),ae=(t(91),function(e){var a=e.className,t=e.current,n=e.total,o=e.onClick,i=[],l=Math.ceil(n/5),c=l<5?l:5;if(1===t){for(var s=t;s<c;s++)i.push(s);i.push(l)}else if(2===t){i.push(1);for(var m=t;m<c;m++)i.push(m);i.push(l)}else if(t===l-1){i.push(1);for(var v=t-2;v<c+2;v++)i.push(v);i.push(l)}else if(t===l){i.push(1);for(var f=t-3;f<c+2;f++)i.push(f);i.push(l)}else i.push(1,t-1,t,t+1,l);return r.a.createElement("div",{className:E()("pagination",Object(u.a)({},a,a))},i.map((function(e){return r.a.createElement(O,{key:e,className:E()("pagination__btn",{"pagination__btn--active":e===t}),onClick:function(){return o(e)}},e)})))}),te=(t(92),function(e){var a=e.movies,t=Object(n.useState)(1),o=Object(x.a)(t,2),i=o[0],c=o[1];return r.a.createElement("div",{className:"favorite-movies"},r.a.createElement("table",{className:"favorite-movies__table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"favorite-movies__tr"},r.a.createElement("th",{className:"favorite-movies__th"},"ID"),r.a.createElement("th",{className:"favorite-movies__th"},"Image"),r.a.createElement("th",{className:"favorite-movies__th"},"Title"),r.a.createElement("th",{className:"favorite-movies__th favorite-movies__th--overview"},"Overview"),r.a.createElement("th",{className:"favorite-movies__th"},"Options"))),r.a.createElement("tbody",null,a.slice(5*(i-1),5*i).map((function(e){var a=e.id,t=e.poster_path,n=e.original_title,o=e.overview;return r.a.createElement("tr",{key:a,className:"favorite-movies__tr"},r.a.createElement("td",{className:"favorite-movies__td"},r.a.createElement(l.b,{to:"/movies/".concat(a),className:"favorite-movies__link"},r.a.createElement("i",{className:"fas fa-link favorite-movies__icon"}),r.a.createElement("span",{className:"favorite-movies__text"},a))),r.a.createElement("td",{className:"favorite-movies__td"},r.a.createElement("div",{className:"favorite-movies__img-wrapper"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(t),alt:n,className:"favorite-movies__img"}))),r.a.createElement("td",{className:"favorite-movies__td"},n),r.a.createElement("td",{className:"favorite-movies__td favorite-movies__td--overview"},o),r.a.createElement("td",{className:"favorite-movies__td"},r.a.createElement(O,{className:"button--red favorite-movies__btn"},"Remove")))})))),r.a.createElement(ae,{className:"favorite-movies__pagination",current:i,total:a.length,onClick:function(e){c(e)}}))}),ne=function(e){return{type:"[favorite movies] SAVE_FAVORITE_MOVIES",movies:e}},re=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={search:"",movies:[],isFetching:!1},e.onChangeInputHandler=function(a){var t=a.target,n=t.name,r=t.value;e.setState(Object(u.a)({},n,r))},e.fetchMovies=function(a,t){e.setState({isFetching:!0}),V.get("/search/movie?api_key=".concat("1a67fd8fb5bbd9369d8ed3886f1ac2e2","&language=en-US&query=").concat(a,"&page=1")).then((function(a){if(a.data){var t=a.data.results;setTimeout((function(){e.setState({movies:t})}),1e3)}})).catch((function(e){console.log("[error]",e)})).finally((function(){setTimeout((function(){e.setState({isFetching:!1}),t&&t()}),1e3)}))},e.searchMovies=function(){var a=e.state.search;if(a){var t=e.props.history;e.fetchMovies(a,(function(){return t.push("/")}))}},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.authenticateUser,t=e.fetchFavoriteMovies,n=localStorage.getItem("idToken"),r=localStorage.getItem("localId"),o=localStorage.getItem("databaseKey");if(!(!!n&&!!r&&!!o))return localStorage.removeItem("idToken"),localStorage.removeItem("localId"),void localStorage.removeItem("databaseKey");a(n,r,o),this.fetchMovies("avengers"),t(o)}},{key:"componentDidUpdate",value:function(e){var a=this.props,t=a.isAuthenticated,n=a.fetchFavoriteMovies,r=a.databaseKey;!e.isAuthenticated&&t&&(this.fetchMovies("avengers"),n(r))}},{key:"render",value:function(){var e=this.state,a=e.search,t=e.movies,n=e.isFetching,o=this.props,i=o.favoriteMovies,l=o.addMovieToFavorite,c=o.removeMovieFromFavorite,s=localStorage.getItem("idToken"),m=localStorage.getItem("localId"),u=!!s&&!!m;return r.a.createElement(b,null,r.a.createElement(C,{search:a,isFetching:n,onChangeInput:this.onChangeInputHandler,searchMovies:this.searchMovies},r.a.createElement(h.d,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{path:"/auth",component:Y}),r.a.createElement(h.a,{to:"/auth"})),r.a.createElement(h.b,{path:"/",exact:!0,render:function(){return r.a.createElement(F,{movies:t})}}),r.a.createElement(h.b,{path:"/movies/:movieId",render:function(e){return r.a.createElement(H,Object.assign({},e,{movies:t,favoriteMovies:i,addMovieToFavorite:l,removeMovieFromFavorite:c}))}}),r.a.createElement(h.b,{path:"/favorite-movies",render:function(){return r.a.createElement(te,{movies:i})}}),r.a.createElement(h.b,{path:"/profile",component:L}),r.a.createElement(h.b,{path:"/404",component:ee}),r.a.createElement(h.a,{from:"/auth",to:"/"}),r.a.createElement(h.a,{to:"/404"}))))}}]),t}(n.PureComponent),oe=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.idToken,databaseKey:e.auth.databaseKey,favoriteMovies:e.favoriteMovies.movies}}),{authenticateUser:k,fetchFavoriteMovies:function(e){return function(a){K.get("/users/".concat(e,"/favoriteMovies.json")).then((function(e){var t=e.data;if(t){var n=Object.entries(t).map((function(e){var a=Object(x.a)(e,2),t=a[0],n=a[1];return Object(z.a)(Object(z.a)({},n),{},{databaseId:t})}));a(ne(n))}})).catch((function(e){console.log("[error]",e)}))}},addMovieToFavorite:function(e){return function(a,t){var n=t().auth.databaseKey;K.post("/users/".concat(n,"/favoriteMovies.json"),e).then((function(t){var n=t.data.name;a(function(e){return{type:"[favorite movies] ADD_MOVIE_TO_FAVORITE",movie:e}}(Object(z.a)(Object(z.a)({},e),{},{databaseId:n})))})).catch((function(e){console.log("[error]",e)}))}},removeMovieFromFavorite:function(e){return function(a,t){var n=t().auth.databaseKey;K.delete("/users/".concat(n,"/favoriteMovies/").concat(e,".json")).then((function(){a(function(e){return{type:"[favorite movies] REMOVE_MOVIE_FROM_FAVORITE",databaseId:e}}(e))})).catch((function(e){console.log("[error]",e)}))}}})(Object(h.g)(re)),ie={userName:"John Doe",userAge:23},le=function(e,a){return Object(z.a)(Object(z.a)({},e),{},{userName:a.newName})},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"[profile] CHANGE_USER_NAME":return le(e,n);default:return e}},se=t(46),me={movies:[]},ue=function(e,a){return Object(z.a)(Object(z.a)({},e),{},{movies:a.movies})},ve=function(e,a){return Object(z.a)(Object(z.a)({},e),{},{movies:[].concat(Object(se.a)(e.movies),[a.movie])})},fe=function(e,a){return Object(z.a)(Object(z.a)({},e),{},{movies:e.movies.filter((function(e){return e.databaseId!==a.databaseId}))})},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"[favorite movies] SAVE_FAVORITE_MOVIES":return ue(e,a);case"[favorite movies] ADD_MOVIE_TO_FAVORITE":return ve(e,a);case"[favorite movies] REMOVE_MOVIE_FROM_FAVORITE":return fe(e,a);default:return e}},pe={idToken:null,localId:null,databaseKey:null},he=function(e,a){return Object(z.a)(Object(z.a)({},e),{},{idToken:a.idToken,localId:a.localId,databaseKey:a.databaseKey})},_e=function(e){return Object(z.a)(Object(z.a)({},e),{},{idToken:null,localId:null,databaseKey:null})},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"[auth] AUTHENTICATE_USER":return he(e,a);case"[auth] LOGOUT_USER":return _e(e);default:return e}},ge=Object(c.c)({profile:ce,favoriteMovies:de,auth:be});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(93);var Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,Ne=Object(c.e)(ge,Ee(Object(c.a)(m.a)));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:Ne},r.a.createElement(l.a,null,r.a.createElement(oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.96b047eb.chunk.js.map